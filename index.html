<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#0D0A1A">
<title>Sari's Sound Quest</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
html,body{font-family:'Fredoka',sans-serif;background:#0D0A1A;color:#fff;overflow-x:hidden;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased;min-height:100vh;min-height:100dvh}
button{font-family:'Fredoka',sans-serif;border:none;cursor:pointer;-webkit-appearance:none;color:#fff}
#root{min-height:100vh;min-height:100dvh}
@keyframes confettiFall{0%{opacity:1;transform:translateY(0) rotate(0)}100%{opacity:0;transform:translateY(100vh) rotate(720deg)}}
@keyframes megaFall{0%{opacity:1;transform:translateY(0) rotate(0) scale(1)}50%{opacity:1;transform:translateY(50vh) rotate(360deg) scale(1.2)}100%{opacity:0;transform:translateY(100vh) rotate(720deg) scale(.5)}}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.06)}}
@keyframes glow{0%,100%{box-shadow:0 0 20px rgba(255,59,139,.4)}50%{box-shadow:0 0 45px rgba(255,59,139,.8)}}
@keyframes slideUp{from{opacity:0;transform:translateY(40px)}to{opacity:1;transform:translateY(0)}}
@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{transform:scale(1.12)}100%{opacity:1;transform:scale(1)}}
@keyframes shake{0%,100%{transform:translateX(0)}20%{transform:translateX(-8px)}40%{transform:translateX(8px)}60%{transform:translateX(-4px)}80%{transform:translateX(4px)}}
@keyframes sparkle{0%,100%{opacity:.2;transform:scale(.7)}50%{opacity:1;transform:scale(1.3)}}
@keyframes rainbowBg{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
@keyframes popIn{0%{opacity:0;transform:scale(0)}70%{transform:scale(1.15)}100%{opacity:1;transform:scale(1)}}
@keyframes letterSmash{0%{opacity:0;transform:translateX(var(--sx,0)) scale(1.6)}60%{opacity:1;transform:translateX(0) scale(1.1)}80%{transform:translateX(0) scale(.95)}100%{opacity:1;transform:translateX(0) scale(1)}}
@keyframes stickerPop{0%{opacity:0;transform:scale(0) rotate(-20deg)}60%{transform:scale(1.3) rotate(5deg)}100%{opacity:1;transform:scale(1) rotate(0)}}
@keyframes starPulse{0%,100%{transform:scale(1);filter:brightness(1)}50%{transform:scale(1.15);filter:brightness(1.3)}}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
</style>
</head>
<body>
<div id="root"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.3.1/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.3.1/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.26.2/babel.min.js"></script>
<script type="text/babel">
const {useState,useEffect,useRef,useCallback}=React;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  SARI'S SOUND QUEST v5
//  ElevenLabs Human Voice Edition
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// â”€â”€ DATA â”€â”€
const WDS=[
{w:"cat",i:"ðŸ±",f:"at"},{w:"bat",i:"ðŸ¦‡",f:"at"},{w:"hat",i:"ðŸŽ©",f:"at"},{w:"mat",i:"ðŸ§¹",f:"at"},{w:"sat",i:"ðŸ’º",f:"at"},{w:"rat",i:"ðŸ€",f:"at"},{w:"pat",i:"ðŸ‘‹",f:"at"},
{w:"dog",i:"ðŸ¶",f:"og"},{w:"log",i:"ðŸªµ",f:"og"},{w:"hog",i:"ðŸ·",f:"og"},{w:"fog",i:"ðŸŒ«ï¸",f:"og"},{w:"jog",i:"ðŸƒ",f:"og"},
{w:"pig",i:"ðŸ·",f:"ig"},{w:"big",i:"ðŸ”ï¸",f:"ig"},{w:"dig",i:"â›ï¸",f:"ig"},{w:"wig",i:"ðŸ’‡",f:"ig"},{w:"fig",i:"ðŸ‡",f:"ig"},
{w:"sun",i:"â˜€ï¸",f:"un"},{w:"run",i:"ðŸƒ",f:"un"},{w:"fun",i:"ðŸŽ‰",f:"un"},{w:"bun",i:"ðŸ”",f:"un"},
{w:"cup",i:"â˜•",f:"up"},{w:"pup",i:"ðŸ¶",f:"up"},
{w:"bed",i:"ðŸ›ï¸",f:"ed"},{w:"red",i:"ðŸ”´",f:"ed"},
{w:"pen",i:"ðŸ–Šï¸",f:"en"},{w:"hen",i:"ðŸ”",f:"en"},{w:"ten",i:"ðŸ”Ÿ",f:"en"},
{w:"hot",i:"ðŸ”¥",f:"ot"},{w:"pot",i:"ðŸ²",f:"ot"},{w:"dot",i:"âš«",f:"ot"},{w:"got",i:"ðŸŽ",f:"ot"},
{w:"map",i:"ðŸ—ºï¸",f:"ap"},{w:"cap",i:"ðŸ§¢",f:"ap"},{w:"tap",i:"ðŸš°",f:"ap"},{w:"nap",i:"ðŸ˜´",f:"ap"},
{w:"fin",i:"ðŸ¦ˆ",f:"in"},{w:"pin",i:"ðŸ“Œ",f:"in"},{w:"win",i:"ðŸ†",f:"in"},
{w:"sit",i:"ðŸª‘",f:"it"},{w:"hit",i:"ðŸ’¥",f:"it"},{w:"bit",i:"ðŸª",f:"it"},{w:"fit",i:"ðŸ’ª",f:"it"},
{w:"van",i:"ðŸš",f:"an"},{w:"can",i:"ðŸ¥«",f:"an"},{w:"man",i:"ðŸ§‘",f:"an"},{w:"fan",i:"ðŸŒ€",f:"an"},{w:"pan",i:"ðŸ³",f:"an"},{w:"ran",i:"ðŸƒ",f:"an"},
{w:"bug",i:"ðŸ›",f:"ug"},{w:"hug",i:"ðŸ¤—",f:"ug"},{w:"mug",i:"â˜•",f:"ug"},{w:"rug",i:"ðŸŸ«",f:"ug"},{w:"tug",i:"ðŸš¢",f:"ug"},
{w:"hop",i:"ðŸ‡",f:"op"},{w:"pop",i:"ðŸŽˆ",f:"op"},{w:"mop",i:"ðŸ§¹",f:"op"},{w:"top",i:"ðŸ”",f:"op"},
];
const LS={a:"aah",b:"buh",c:"kuh",d:"duh",e:"eh",f:"fuh",g:"guh",h:"huh",i:"ih",j:"juh",k:"kuh",l:"luh",m:"muh",n:"nuh",o:"aww",p:"puh",r:"ruh",s:"sss",t:"tuh",u:"uh",v:"vuh",w:"wuh",x:"ks",y:"yuh",z:"zzz"};
const AZ="abcdefghijklmnopqrstuvwxyz".split("");
const CHEERS=["Mommy loves you SO much!","Daddy is SO proud of you!","Mommy and Daddy are cheering!","Mommy says you're amazing!","Daddy says that's his girl!","Mommy is jumping up and down!","Daddy says wow, Sari, wow!","Mommy says you're the smartest!","Bubby Feig is SO proud!","Bubby says that's my granddaughter!","Bubby is shepping nachas!","Bubby Feig is clapping for you!","Bubby says she knew you could do it!","Kira next door says wow!","Kira is cheering for you!","Kira says you're so smart!","Kira wants to celebrate!","Abby says amazing!","Abby is so proud of you!","Cousin Ahuvah is cheering!","Cousin Ahuvah says wow Sari!","Baby Talia is clapping for you!","Talia says yay big sister!","Baby Talia is so happy!","Mordechai Shapiro says incredible!","Uncle Moishy is dancing for you!","Zisha says you're a star!","Bais Yaakov's smartest girl!","Like a swimming gold medal!","Daniel Tiger says great job!","Ugga Mugga Sari!","Superstar Sari!","You're amazing!"];
const TRIES=["Almost! Mommy says try again!","So close! Daddy believes in you!","Bubby says you're getting it!","Kira says you'll get the next one!","Abby is cheering you on!","Cousin Ahuvah says you can do it!","Baby Talia says try again big sister!","Mommy and Daddy are so proud you're trying!","Bubby says winners keep going!","So close Sari, you're learning!"];
const STIX=["â­","ðŸŒŸ","ðŸ’«","âœ¨","ðŸ¦„","ðŸŒˆ","ðŸ¦‹","ðŸŽ€","ðŸ’Ž","ðŸ‘‘","ðŸŒ¸","ðŸ­","ðŸ§","ðŸŽ ","ðŸ¬","ðŸ¦©","ðŸ¯","ðŸ•","ðŸ¦","ðŸŒ­","ðŸŠâ€â™€ï¸","ðŸŽµ","ðŸŽ¶","ðŸ’•","ðŸ¦ˆ","ðŸ±","ðŸ¶","ðŸŽˆ","ðŸª","ðŸŒº"];
const PRIZES=[{id:1,s:10,e:"ðŸ•",n:"Pizza Night Coupon!",t:"real"},{id:2,s:20,e:"ðŸŽ€",n:"Sparkle Sticker Pack!",t:"virt"},{id:3,s:35,e:"ðŸ¦",n:"Ice Cream Trip!",t:"real"},{id:4,s:50,e:"ðŸŒ­",n:"Hot Dog Party!",t:"real"},{id:5,s:65,e:"ðŸ¦„",n:"Unicorn Badge!",t:"virt"},{id:6,s:75,e:"ðŸ¯",n:"Daniel Tiger Movie Night!",t:"real"},{id:7,s:100,e:"ðŸ‘‘",n:"Reading Queen Crown!",t:"virt"},{id:8,s:125,e:"ðŸŒˆ",n:"Rainbow Super Sticker!",t:"virt"},{id:9,s:150,e:"ðŸŠâ€â™€ï¸",n:"Swimming Party with Kira!",t:"real"},{id:10,s:200,e:"ðŸ’•",n:"Date with Mommy and Daddy!",t:"real"},{id:11,s:250,e:"ðŸ’Ž",n:"Diamond Reader Badge!",t:"virt"},{id:12,s:300,e:"ðŸŽ‚",n:"Mega Celebration!",t:"real"}];
const STG=[{id:"sound",em:"ðŸ”Š",nm:"Sound Match",cl:"#FF3B8B"},{id:"rhyme",em:"ðŸŽµ",nm:"Rhyme Rocket",cl:"#B44BFF"},{id:"blend",em:"ðŸš€",nm:"Blend Blaster",cl:"#00C2FF"},{id:"build",em:"ðŸ”¨",nm:"Word Builder",cl:"#FF9500"}];

const shuf=a=>{const b=[...a];for(let i=b.length-1;i>0;i--){const j=0|Math.random()*(i+1);[b[i],b[j]]=[b[j],b[i]]}return b};
const pick=a=>a[0|Math.random()*a.length];
const td=()=>new Date().toISOString().slice(0,10);
const yd=()=>{const d=new Date();d.setDate(d.getDate()-1);return d.toISOString().slice(0,10)};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  VOICE ENGINE â€” ElevenLabs + Fallback
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// ElevenLabs config
const XI_VOICES = {
  "Rachel (Warm)":"21m00Tcm4TlvDq8ikWAM",
  "Aria (Friendly)":"9BWtsMINqrJLrRacOk9x",
  "Sarah (Soft)":"EXAVITQu4vr4xnSDxMaL",
  "Charlotte (Sweet)":"XB0fDUnXU5powFXDhCwa",
  "Lily (Gentle)":"pFZP5JQG7iQjIQuC4Bku",
};
const XI_DEFAULT_VOICE = "21m00Tcm4TlvDq8ikWAM"; // Rachel

// State
let xiKey = localStorage.getItem("sq_xi_key") || "";
let xiVoice = localStorage.getItem("sq_xi_voice") || XI_DEFAULT_VOICE;
const audioCache = new Map();
let curAudio = null;
let xiEnabled = !!xiKey;

// Play audio blob
const playBlob = (blob) => {
  return new Promise((resolve) => {
    if (curAudio) { curAudio.pause(); curAudio = null; }
    const url = URL.createObjectURL(blob);
    curAudio = new Audio(url);
    curAudio.onended = () => resolve();
    curAudio.onerror = () => resolve();
    curAudio.play().catch(() => resolve());
  });
};

// ElevenLabs TTS
const xiSpeak = async (text) => {
  if (!xiKey) return false;

  // Check cache first
  const cacheKey = xiVoice + ":" + text;
  if (audioCache.has(cacheKey)) {
    await playBlob(audioCache.get(cacheKey));
    return true;
  }

  try {
    const resp = await fetch("https://api.elevenlabs.io/v1/text-to-speech/" + xiVoice + "/stream", {
      method: "POST",
      headers: { "xi-api-key": xiKey, "Content-Type": "application/json", "Accept": "audio/mpeg" },
      body: JSON.stringify({
        text: text,
        model_id: "eleven_flash_v2_5",
        voice_settings: { stability: 0.65, similarity_boost: 0.78, style: 0.35, use_speaker_boost: true }
      })
    });
    if (!resp.ok) {
      console.warn("XI error:", resp.status);
      return false;
    }
    const blob = await resp.blob();
    audioCache.set(cacheKey, blob);
    await playBlob(blob);
    return true;
  } catch (e) {
    console.warn("XI fail:", e);
    return false;
  }
};

// Fallback: device Web Speech API
let bv = null;
const fv = () => {
  if (!window.speechSynthesis) return;
  const vs = window.speechSynthesis.getVoices();
  if (!vs.length) return;
  const ts = [v=>v.name==='Samantha',v=>v.name==='Samantha (Enhanced)',v=>/\bAva\b/.test(v.name)&&v.lang.startsWith('en'),v=>/\bZoe\b/.test(v.name),v=>v.name==='Google US English',v=>/\bJenny\b/.test(v.name),v=>/\bAria\b/.test(v.name),v=>v.lang==='en-US',v=>v.lang&&v.lang.startsWith('en')];
  for (const t of ts) { const f = vs.find(t); if (f) { bv = f; return; } }
  bv = vs[0];
};
if (window.speechSynthesis) { fv(); window.speechSynthesis.onvoiceschanged = fv; }

const fallbackSay = (text, rate) => {
  if (!window.speechSynthesis) return;
  window.speechSynthesis.cancel();
  if (!bv) fv();
  const u = new SpeechSynthesisUtterance(text);
  if (bv) u.voice = bv;
  u.rate = rate || 0.8;
  u.pitch = 1.0;
  u.volume = 1;
  u.lang = "en-US";
  window.speechSynthesis.speak(u);
};
const fallbackSayL = (l) => {
  if (!window.speechSynthesis) return;
  window.speechSynthesis.cancel();
  if (!bv) fv();
  const u = new SpeechSynthesisUtterance(LS[l] || l);
  if (bv) u.voice = bv;
  u.rate = 0.6; u.pitch = 1.0; u.volume = 1; u.lang = "en-US";
  window.speechSynthesis.speak(u);
};
const initS = () => {
  if (window.speechSynthesis) {
    const u = new SpeechSynthesisUtterance(' '); u.volume = 0.01;
    window.speechSynthesis.speak(u);
    setTimeout(fv, 200);
  }
};

// â”€â”€ UNIFIED SAY FUNCTIONS â”€â”€
// These try ElevenLabs first, fall back to device voice
const say = async (text) => {
  if (xiKey) {
    const ok = await xiSpeak(text);
    if (ok) return;
  }
  fallbackSay(text, 0.8);
};

const sayL = async (l) => {
  const phoneticText = LS[l] || l;
  if (xiKey) {
    // For letter sounds, wrap in SSML-like hint
    const ok = await xiSpeak(phoneticText);
    if (ok) return;
  }
  fallbackSayL(l);
};

const sayW = async (w) => {
  if (xiKey) {
    const ok = await xiSpeak(w);
    if (ok) return;
  }
  fallbackSay(w, 0.72);
};

const sayBlend = (word, cb) => {
  const ls = word.split("");
  let d = 0;
  ls.forEach(l => { setTimeout(() => sayL(l), d); d += 950; });
  setTimeout(() => { sayW(word); if (cb) cb(); }, d + 650);
};

// â”€â”€ STORAGE â”€â”€
const SK = "sq5";
const DF = { stars: 0, ok: 0, played: 0, streak: 0, stk: [], last: null, days: 0 };
const ld = () => { try { return { ...DF, ...JSON.parse(localStorage.getItem(SK)) }; } catch { return { ...DF }; } };
const sv = p => { try { localStorage.setItem(SK, JSON.stringify(p)); } catch {} };

// â”€â”€ GENERATORS â”€â”€
const gS=()=>{const w=pick(WDS),tl=pick(w.w.split("")),wr=shuf(AZ.filter(l=>l!==tl)).slice(0,3);return{m:"sound",letter:tl,opts:shuf([tl,...wr]),word:w}};
const gR=()=>{const w=pick(WDS),rh=WDS.filter(x=>x.f===w.f&&x.w!==w.w);if(!rh.length)return gR();const c=pick(rh),wr=shuf(WDS.filter(x=>x.f!==w.f)).slice(0,2);return{m:"rhyme",target:w,correct:c,opts:shuf([c,...wr])}};
const gB=()=>{const w=pick(WDS),wr=shuf(WDS.filter(x=>x.w!==w.w&&x.f!==w.f)).slice(0,2);return{m:"blend",target:w,opts:shuf([w,...wr])}};
const gW=()=>{const w=pick(WDS),ls=w.w.split(""),ex=shuf(AZ.filter(l=>!ls.includes(l))).slice(0,3);return{m:"build",target:w,tiles:shuf([...ls,...ex])}};
const buildQ=()=>[gS(),gS(),gS(),gS(),gS(),gR(),gR(),gR(),gR(),gR(),gB(),gB(),gB(),gB(),gB(),gW(),gW(),gW(),gW(),gW()];

// â”€â”€ UI PIECES â”€â”€
const BG="linear-gradient(180deg,#0D0A1A 0%,#1A0A2E 100%)";
const CD="linear-gradient(145deg,#2A1F3D,#1E1433)";
const Glow=()=>React.createElement("div",{style:{position:"fixed",inset:0,pointerEvents:"none",zIndex:0,background:"radial-gradient(ellipse at 30% 20%,rgba(255,59,139,.06) 0%,transparent 50%),radial-gradient(ellipse at 70% 80%,rgba(180,75,255,.06) 0%,transparent 50%)"}});
const Conf=({on,mega})=>{if(!on)return null;const cols=["#FF3B8B","#FFD700","#00FF88","#B44BFF","#00C2FF","#FF9500"];const emo=["â­","ðŸŒŸ","âœ¨","ðŸŽ‰","ðŸŽ€","ðŸ’Ž","ðŸ¦„","ðŸ•"];const n=mega?55:36;
return React.createElement("div",{style:{position:"fixed",inset:0,pointerEvents:"none",zIndex:999}},Array.from({length:n}).map((_,i)=>{
if(mega&&i%3===0)return React.createElement("div",{key:i,style:{position:"absolute",left:Math.random()*100+"%",top:"-8%",fontSize:18+Math.random()*18,animation:`megaFall ${1+Math.random()*2}s ease-out forwards`,animationDelay:Math.random()*.7+"s",opacity:0}},pick(emo));
return React.createElement("div",{key:i,style:{position:"absolute",left:Math.random()*100+"%",top:"-5%",width:6+Math.random()*10,height:6+Math.random()*10,backgroundColor:pick(cols),borderRadius:Math.random()>.5?"50%":"2px",animation:`confettiFall ${.6+Math.random()*1.4}s ease-out forwards`,animationDelay:Math.random()*.5+"s",opacity:0}})}))};
const SPop=({s})=>{if(!s)return null;return React.createElement("div",{style:{position:"fixed",inset:0,pointerEvents:"none",zIndex:1000,display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement("div",{style:{fontSize:120,animation:"stickerPop .6s ease-out forwards"}},s))};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  SETTINGS PAGE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const Settings=({onBack,onSave})=>{
  const[key,setKey]=useState(xiKey);
  const[voice,setVoice]=useState(xiVoice);
  const[testing,setTesting]=useState(false);
  const[status,setStatus]=useState(xiKey?"âœ… Voice key saved":"No voice key yet");

  const testVoice=async()=>{
    if(!key){setStatus("âŒ Enter a key first");return}
    setTesting(true);setStatus("ðŸ”„ Testing...");
    try{
      const resp=await fetch("https://api.elevenlabs.io/v1/text-to-speech/"+voice+"/stream",{
        method:"POST",
        headers:{"xi-api-key":key,"Content-Type":"application/json","Accept":"audio/mpeg"},
        body:JSON.stringify({text:"Hi Sari! This is your reading teacher! Let's learn together!",model_id:"eleven_flash_v2_5",voice_settings:{stability:0.65,similarity_boost:0.78,style:0.35,use_speaker_boost:true}})
      });
      if(!resp.ok){setStatus("âŒ Key didn't work â€” check it and try again");setTesting(false);return}
      const blob=await resp.blob();
      await playBlob(blob);
      setStatus("âœ… Sounds great! Tap Save.");
    }catch(e){setStatus("âŒ Error â€” check your internet connection")}
    setTesting(false);
  };

  const doSave=()=>{
    xiKey=key;xiVoice=voice;xiEnabled=!!key;
    localStorage.setItem("sq_xi_key",key);
    localStorage.setItem("sq_xi_voice",voice);
    audioCache.clear();
    onSave();
  };

  return React.createElement("div",{style:{minHeight:"100vh",minHeight:"100dvh",display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 16px 40px",background:BG}},
    React.createElement(Glow),
    React.createElement("div",{style:{zIndex:2,width:"100%",maxWidth:440}},
      React.createElement("div",{style:{display:"flex",alignItems:"center",gap:14,marginBottom:24}},
        React.createElement("button",{onClick:onBack,style:{background:"rgba(255,255,255,.07)",borderRadius:12,padding:"8px 16px",fontSize:15,color:"rgba(255,255,255,.5)"}},"â† Back"),
        React.createElement("h2",{style:{fontSize:22,fontWeight:700}},"âš™ï¸ Voice Settings")),

      // Instructions
      React.createElement("div",{style:{background:"rgba(255,255,255,.04)",border:"1px solid rgba(255,255,255,.08)",borderRadius:20,padding:"18px 20px",marginBottom:20,animation:"slideUp .4s ease-out"}},
        React.createElement("div",{style:{fontSize:16,fontWeight:600,marginBottom:10}},"ðŸŽ™ï¸ Get a Human-Sounding Voice"),
        React.createElement("div",{style:{fontSize:14,color:"rgba(255,255,255,.6)",lineHeight:1.6}},
          "1. Go to ",React.createElement("span",{style:{color:"#00C2FF"}},"elevenlabs.io"),React.createElement("br"),
          "2. Sign up free (Google login works)",React.createElement("br"),
          "3. Click your profile â†’ API Keys",React.createElement("br"),
          "4. Copy your key and paste it below",React.createElement("br"),
          React.createElement("span",{style:{fontSize:12,color:"rgba(255,255,255,.35)",marginTop:4,display:"inline-block"}},"Free: ~10k chars/month (~10 quests). $5/month for 30k+")
        )
      ),

      // API Key input
      React.createElement("div",{style:{marginBottom:18,animation:"slideUp .5s ease-out"}},
        React.createElement("div",{style:{fontSize:13,color:"rgba(255,255,255,.4)",marginBottom:6}},"ElevenLabs API Key"),
        React.createElement("input",{value:key,onChange:e=>setKey(e.target.value),placeholder:"Paste your key here...",
          style:{width:"100%",background:"rgba(255,255,255,.06)",border:"1.5px solid rgba(255,255,255,.12)",borderRadius:14,padding:"14px 16px",fontSize:15,color:"#fff",fontFamily:"'Fredoka',sans-serif",outline:"none"}})),

      // Voice picker
      React.createElement("div",{style:{marginBottom:20,animation:"slideUp .6s ease-out"}},
        React.createElement("div",{style:{fontSize:13,color:"rgba(255,255,255,.4)",marginBottom:8}},"Choose a Voice"),
        React.createElement("div",{style:{display:"flex",flexDirection:"column",gap:8}},
          ...Object.entries(XI_VOICES).map(([name,vid])=>
            React.createElement("button",{key:vid,onClick:()=>setVoice(vid),style:{
              background:voice===vid?"linear-gradient(145deg,rgba(255,59,139,.15),rgba(180,75,255,.08))":"rgba(255,255,255,.03)",
              border:voice===vid?"1.5px solid #FF3B8B":"1px solid rgba(255,255,255,.08)",
              borderRadius:14,padding:"12px 16px",textAlign:"left",display:"flex",alignItems:"center",justifyContent:"space-between"
            }},
              React.createElement("span",{style:{fontSize:15,fontWeight:voice===vid?600:400}},name),
              voice===vid&&React.createElement("span",{style:{color:"#FF3B8B",fontSize:13}},"âœ“ Selected")
            )
          )
        )
      ),

      // Test + Save buttons
      React.createElement("div",{style:{display:"flex",gap:12,marginBottom:16,animation:"slideUp .7s ease-out"}},
        React.createElement("button",{onClick:testVoice,disabled:testing,style:{flex:1,background:"linear-gradient(135deg,#B44BFF,#8B3BCF)",borderRadius:16,padding:"14px 20px",fontSize:16,fontWeight:600,opacity:testing?.6:1}},
          testing?"ðŸ”„ Testing...":"ðŸ”Š Test Voice"),
        React.createElement("button",{onClick:doSave,style:{flex:1,background:"linear-gradient(135deg,#00FF88,#00CC66)",borderRadius:16,padding:"14px 20px",fontSize:16,fontWeight:600,color:"#0D0A1A"}},"ðŸ’¾ Save")),

      // Status
      React.createElement("div",{style:{textAlign:"center",fontSize:14,color:"rgba(255,255,255,.5)",animation:"slideUp .8s ease-out"}},status),

      // Remove key option
      xiKey&&React.createElement("button",{onClick:()=>{setKey("");xiKey="";xiEnabled=false;localStorage.removeItem("sq_xi_key");setStatus("Key removed â€” using device voice")},style:{display:"block",margin:"20px auto 0",background:"none",border:"none",fontSize:13,color:"rgba(255,255,255,.25)",textDecoration:"underline"}},"Remove key & use device voice")
    )
  );
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  GAME COMPONENTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// â”€â”€ SOUND MATCH â”€â”€
const SoundG=({q,onA})=>{const[sel,setSel]=useState(null);const[res,setRes]=useState(null);const[msg,setMsg]=useState("");
useEffect(()=>{setSel(null);setRes(null);setMsg("");setTimeout(()=>{say("Which letter makes this sound?");setTimeout(()=>sayL(q.letter),2800)},400)},[q]);
const tap=l=>{if(sel)return;setSel(l);const ok=l===q.letter;setRes(ok);const m=ok?pick(CHEERS):("The letter was "+q.letter.toUpperCase()+". "+pick(TRIES));setMsg(m);setTimeout(()=>say(m),250);setTimeout(()=>onA(ok),ok?1800:2600)};
return React.createElement("div",{style:{textAlign:"center",animation:"slideUp .4s ease-out"}},
React.createElement("div",{style:{fontSize:15,color:"rgba(255,255,255,.45)",marginBottom:10}},"Listen and find the letter!"),
React.createElement("button",{onClick:()=>sayL(q.letter),style:{background:"linear-gradient(135deg,#FF3B8B,#FF6B8B)",borderRadius:50,width:"clamp(100px,24vw,130px)",height:"clamp(100px,24vw,130px)",fontSize:"clamp(44px,11vw,60px)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 28px",animation:"pulse 2s ease-in-out infinite",boxShadow:"0 8px 35px rgba(255,59,139,.35)"}},"ðŸ”Š"),
React.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"clamp(12px,3vw,18px)",maxWidth:320,margin:"0 auto"}},
...q.opts.map((l,i)=>{const isC=l===q.letter,isS=l===sel;let bg=CD,bd="2.5px solid rgba(255,255,255,.12)",an=`popIn .3s ease-out ${i*.09}s both`;
if(res!==null&&isC){bg="linear-gradient(145deg,#00FF88,#00CC66)";bd="2.5px solid #00FF88"}if(isS&&res===false){bg="linear-gradient(145deg,#FF6B6B,#FF4444)";bd="2.5px solid #FF6B6B";an="shake .4s ease"}
return React.createElement("button",{key:l+i,onClick:()=>tap(l),style:{width:"100%",height:"clamp(74px,19vw,92px)",borderRadius:20,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"clamp(32px,9vw,44px)",fontWeight:700,textTransform:"uppercase",background:bg,border:bd,cursor:sel?"default":"pointer",animation:an}},l.toUpperCase())})),
msg&&React.createElement("div",{style:{marginTop:20,fontSize:16,fontWeight:600,animation:"bounceIn .3s ease-out",color:res?"#00FF88":"#FF6B6B",padding:"0 12px",lineHeight:1.4}},msg))};

// â”€â”€ RHYME â”€â”€
const RhymeG=({q,onA})=>{const[sel,setSel]=useState(null);const[res,setRes]=useState(null);const[msg,setMsg]=useState("");
useEffect(()=>{setSel(null);setRes(null);setMsg("");setTimeout(()=>say("What rhymes with... "+q.target.w+"?"),400)},[q]);
const tap=x=>{if(sel)return;setSel(x.w);const ok=x.w===q.correct.w;setRes(ok);const m=ok?(q.target.w+" and "+x.w+" rhyme! "+pick(CHEERS)):(q.target.w+" rhymes with "+q.correct.w+". "+pick(TRIES));setMsg(m);setTimeout(()=>say(m),250);setTimeout(()=>onA(ok),ok?2000:2800)};
return React.createElement("div",{style:{textAlign:"center",animation:"slideUp .4s ease-out"}},
React.createElement("div",{style:{fontSize:15,color:"rgba(255,255,255,.45)",marginBottom:12}},"What rhymes with..."),
React.createElement("button",{onClick:()=>sayW(q.target.w),style:{background:"linear-gradient(145deg,#B44BFF22,#B44BFF0A)",border:"2.5px solid #B44BFF44",borderRadius:22,padding:"clamp(14px,3vw,20px) clamp(22px,5vw,36px)",display:"inline-flex",alignItems:"center",gap:12,marginBottom:28}},
React.createElement("span",{style:{fontSize:"clamp(40px,10vw,52px)"}},q.target.i),React.createElement("span",{style:{fontSize:"clamp(26px,7vw,36px)",fontWeight:700,textTransform:"uppercase"}},q.target.w),React.createElement("span",{style:{fontSize:24}},"ðŸ”Š")),
React.createElement("div",{style:{display:"flex",flexDirection:"column",gap:14,maxWidth:340,margin:"0 auto"}},
...q.opts.map((x,i)=>{const isC=x.w===q.correct.w,isS=x.w===sel;let bg=CD,bd="2.5px solid rgba(255,255,255,.1)",an=`popIn .3s ease-out ${i*.1}s both`;
if(res!==null&&isC){bg="linear-gradient(145deg,#00FF8822,#00CC6611)";bd="2.5px solid #00FF88"}if(isS&&res===false){bg="linear-gradient(145deg,#FF6B6B22,#FF444411)";bd="2.5px solid #FF6B6B";an="shake .4s ease"}
return React.createElement("button",{key:x.w,onClick:()=>tap(x),style:{background:bg,border:bd,borderRadius:20,padding:"clamp(14px,3vw,18px) 20px",display:"flex",alignItems:"center",gap:14,cursor:sel?"default":"pointer",animation:an}},
React.createElement("span",{style:{fontSize:"clamp(32px,9vw,42px)"}},x.i),React.createElement("span",{style:{fontSize:"clamp(22px,6vw,28px)",fontWeight:600,textTransform:"uppercase"}},x.w))})),
msg&&React.createElement("div",{style:{marginTop:20,fontSize:16,fontWeight:600,animation:"bounceIn .3s ease-out",color:res?"#00FF88":"#FF6B6B",padding:"0 12px",lineHeight:1.4}},msg))};

// â”€â”€ BLEND â”€â”€
const BlendG=({q,onA})=>{const[ph,setPh]=useState("bl");const[sel,setSel]=useState(null);const[res,setRes]=useState(null);const[msg,setMsg]=useState("");
useEffect(()=>{setPh("bl");setSel(null);setRes(null);setMsg("");setTimeout(()=>{say("Watch the letters blend together!");setTimeout(()=>sayBlend(q.target.w,()=>setPh("pk")),3200)},400)},[q]);
const tap=x=>{if(sel)return;setSel(x.w);const ok=x.w===q.target.w;setRes(ok);const m=ok?("Yes! "+x.w+"! "+pick(CHEERS)):("It was "+q.target.w+". "+pick(TRIES));setMsg(m);setTimeout(()=>say(m),250);setTimeout(()=>onA(ok),ok?1800:2600)};
const ls=q.target.w.split("");
return React.createElement("div",{style:{textAlign:"center",animation:"slideUp .4s ease-out"}},
React.createElement("div",{style:{fontSize:15,color:"rgba(255,255,255,.45)",marginBottom:18}},"Watch the letters blend!"),
React.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:ph==="bl"?28:6,marginBottom:20,transition:"gap .8s cubic-bezier(.34,1.56,.64,1)",minHeight:90}},
...ls.map((l,i)=>React.createElement("div",{key:i,style:{fontSize:"clamp(44px,13vw,60px)",fontWeight:700,color:"#00C2FF",textTransform:"uppercase",animation:`letterSmash .6s ease-out ${i*.5}s both`,textShadow:"0 0 25px rgba(0,194,255,.5)","--sx":i===0?"-80px":i===ls.length-1?"80px":"0px"}},l)),
ph==="pk"&&React.createElement("div",{style:{fontSize:24,color:"#FFD700",marginLeft:10,animation:"bounceIn .3s ease-out"}},"= ?")),
React.createElement("button",{onClick:()=>sayBlend(q.target.w),style:{background:"none",border:"none",fontSize:15,color:"rgba(255,255,255,.4)",marginBottom:24,padding:"8px 16px"}},"ðŸ”Š Hear again"),
ph==="pk"&&React.createElement("div",{style:{display:"flex",flexDirection:"column",gap:14,maxWidth:340,margin:"0 auto"}},
...q.opts.map((x,i)=>{const isC=x.w===q.target.w,isS=x.w===sel;let bg=CD,bd="2.5px solid rgba(255,255,255,.1)",an=`popIn .3s ease-out ${i*.1}s both`;
if(res!==null&&isC){bg="linear-gradient(145deg,#00FF8822,#00CC6611)";bd="2.5px solid #00FF88"}if(isS&&res===false){bg="linear-gradient(145deg,#FF6B6B22,#FF444411)";bd="2.5px solid #FF6B6B";an="shake .4s ease"}
return React.createElement("button",{key:x.w,onClick:()=>tap(x),style:{background:bg,border:bd,borderRadius:20,padding:"clamp(14px,3vw,18px) 20px",display:"flex",alignItems:"center",gap:14,cursor:sel?"default":"pointer",animation:an}},
React.createElement("span",{style:{fontSize:"clamp(32px,9vw,42px)"}},x.i),React.createElement("span",{style:{fontSize:"clamp(22px,6vw,28px)",fontWeight:600,textTransform:"uppercase"}},x.w))})),
msg&&React.createElement("div",{style:{marginTop:20,fontSize:16,fontWeight:600,animation:"bounceIn .3s ease-out",color:res?"#00FF88":"#FF6B6B",padding:"0 12px",lineHeight:1.4}},msg))};

// â”€â”€ BUILD â”€â”€
const BuildG=({q,onA})=>{const[blt,setBlt]=useState([]);const[usd,setUsd]=useState(new Set());const[res,setRes]=useState(null);const[msg,setMsg]=useState("");
useEffect(()=>{setBlt([]);setUsd(new Set());setRes(null);setMsg("");setTimeout(()=>{say("Build the word! Listen!");setTimeout(()=>sayW(q.target.w),2800)},400)},[q]);
const tap=(l,i)=>{if(res!==null||usd.has(i))return;const nb=[...blt,l];const nu=new Set(usd);nu.add(i);setBlt(nb);setUsd(nu);sayL(l);
if(nb.length===q.target.w.length){const ok=nb.join("")===q.target.w;setRes(ok);const m=ok?("Yes! "+q.target.w+"! "+pick(CHEERS)):("The word was "+q.target.w+". "+pick(TRIES));setMsg(m);setTimeout(()=>say(m),300);setTimeout(()=>onA(ok),ok?1800:2800)}};
const undo=()=>{if(!blt.length||res!==null)return;const ll=blt[blt.length-1];const su=[...usd].sort((a,b)=>b-a);const rm=su.find(i=>q.tiles[i]===ll);const nu=new Set(usd);if(rm!==undefined)nu.delete(rm);setBlt(blt.slice(0,-1));setUsd(nu)};
return React.createElement("div",{style:{textAlign:"center",animation:"slideUp .4s ease-out"}},
React.createElement("div",{style:{fontSize:15,color:"rgba(255,255,255,.45)",marginBottom:10}},"Build the word!"),
React.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,marginBottom:18}},
React.createElement("button",{onClick:()=>sayW(q.target.w),style:{background:"linear-gradient(135deg,#FF9500,#FFB347)",borderRadius:50,width:"clamp(80px,20vw,100px)",height:"clamp(80px,20vw,100px)",fontSize:"clamp(38px,10vw,48px)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 6px 24px rgba(255,149,0,.3)"}},"ðŸ”Š"),
React.createElement("span",{style:{fontSize:"clamp(44px,12vw,56px)"}},q.target.i)),
React.createElement("div",{style:{display:"flex",justifyContent:"center",gap:"clamp(8px,2vw,12px)",marginBottom:26}},
...Array.from({length:q.target.w.length}).map((_,i)=>React.createElement("div",{key:i,style:{width:"clamp(56px,15vw,70px)",height:"clamp(62px,17vw,78px)",borderRadius:18,background:blt[i]?"linear-gradient(145deg,#FF950028,#FF950010)":"rgba(255,255,255,.04)",border:blt[i]?"2.5px solid #FF9500":"2.5px dashed rgba(255,255,255,.18)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"clamp(30px,8vw,38px)",fontWeight:700,textTransform:"uppercase",animation:blt[i]?"popIn .2s ease-out":undefined}},blt[i]||""))),
React.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"clamp(8px,2vw,12px)",maxWidth:400,margin:"0 auto",marginBottom:18}},
...q.tiles.map((l,i)=>{const u=usd.has(i);return React.createElement("button",{key:i,onClick:()=>tap(l,i),style:{width:"clamp(56px,15vw,68px)",height:"clamp(56px,15vw,68px)",borderRadius:18,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"clamp(26px,7vw,34px)",fontWeight:700,textTransform:"uppercase",background:u?"rgba(255,255,255,.02)":CD,border:u?"2.5px solid rgba(255,255,255,.04)":"2.5px solid rgba(255,255,255,.14)",color:u?"rgba(255,255,255,.12)":"white",cursor:u||res!==null?"default":"pointer",animation:`popIn .2s ease-out ${i*.05}s both`,userSelect:"none"}},l.toUpperCase())})),
blt.length>0&&res===null&&React.createElement("button",{onClick:undo,style:{background:"rgba(255,255,255,.07)",border:"1px solid rgba(255,255,255,.12)",borderRadius:14,padding:"10px 24px",color:"rgba(255,255,255,.5)",fontSize:15}},"â¬…ï¸ Undo"),
msg&&React.createElement("div",{style:{marginTop:20,fontSize:16,fontWeight:600,animation:"bounceIn .3s ease-out",color:res?"#00FF88":"#FF6B6B",padding:"0 12px",lineHeight:1.4}},msg))};

// â•â•â• STAGE INTRO â•â•â•
const StgIntro=({si,onGo})=>{const s=STG[si];
useEffect(()=>{setTimeout(()=>say(si===0?"Let's start today's quest! First up... "+s.nm+"!":"Great job! Next up... "+s.nm+"!"),500)},[si]);
return React.createElement("div",{style:{minHeight:"100vh",minHeight:"100dvh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:20,background:BG}},
React.createElement(Glow),React.createElement("div",{style:{zIndex:2,textAlign:"center"}},
React.createElement("div",{style:{display:"flex",justifyContent:"center",gap:12,marginBottom:32}},
...STG.map((st,i)=>React.createElement("div",{key:st.id,style:{width:52,height:52,borderRadius:16,display:"flex",alignItems:"center",justifyContent:"center",fontSize:26,background:i<si?"linear-gradient(145deg,#00FF8833,#00FF8811)":i===si?`linear-gradient(145deg,${st.cl}44,${st.cl}22)`:"rgba(255,255,255,.05)",border:i===si?`2.5px solid ${st.cl}`:"2px solid rgba(255,255,255,.08)",animation:i===si?"pulse 1.5s ease-in-out infinite":undefined}},i<si?"âœ…":st.em))),
React.createElement("div",{style:{fontSize:16,color:"rgba(255,255,255,.4)",marginBottom:8}},si===0?"Today's Quest Begins!":"Stage "+(si+1)+" of 4"),
React.createElement("div",{style:{fontSize:68,marginBottom:12,animation:"bounceIn .5s ease-out"}},s.em),
React.createElement("h2",{style:{fontSize:"clamp(28px,8vw,38px)",fontWeight:700,marginBottom:8,color:s.cl,animation:"slideUp .5s ease-out"}},s.nm),
React.createElement("p",{style:{fontSize:16,color:"rgba(255,255,255,.5)",marginBottom:36,animation:"slideUp .6s ease-out"}},"5 questions â€” you got this!"),
React.createElement("button",{onClick:()=>{say("Let's go!");setTimeout(onGo,500)},style:{background:`linear-gradient(135deg,${s.cl},${s.cl}CC)`,borderRadius:24,padding:"20px 52px",fontSize:"clamp(22px,6vw,28px)",fontWeight:700,boxShadow:`0 8px 30px ${s.cl}44`,animation:"glow 2s ease-in-out infinite"}},"LET'S GO! ðŸš€")))};

// â•â•â• DAILY QUEST â•â•â•
const Quest=({onDone,onBack})=>{const[qs]=useState(buildQ);const[qi,setQi]=useState(0);const[res,setRes]=useState([]);const[ph,setPh]=useState("intro");const[cf,setCf]=useState(false);const[stk,setStk]=useState(null);
const si=Math.floor(qi/5);const sq=qi%5;const st=STG[si]||STG[3];
const onA=ok=>{const nr=[...res,ok];setRes(nr);if(ok){setCf(true);if(Math.random()>.5){setStk(pick(STIX));setTimeout(()=>setStk(null),1200)}setTimeout(()=>setCf(false),1600)}
setTimeout(()=>{const nq=qi+1;if(nq>=20)onDone(nr);else if(nq%5===0){setQi(nq);setPh("intro")}else setQi(nq)},ok?2000:3000)};
if(ph==="intro")return React.createElement(StgIntro,{si,onGo:()=>setPh("play")});
const q=qs[qi];
return React.createElement("div",{style:{minHeight:"100vh",minHeight:"100dvh",display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 16px 40px",background:BG}},
React.createElement(Glow),React.createElement(Conf,{on:cf}),React.createElement(SPop,{s:stk}),
React.createElement("div",{style:{zIndex:2,width:"100%",maxWidth:440}},
React.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16}},
React.createElement("button",{onClick:()=>{say("Going back!");setTimeout(onBack,400)},style:{background:"rgba(255,255,255,.07)",borderRadius:12,padding:"8px 14px",fontSize:14,color:"rgba(255,255,255,.5)"}},"â† Back"),
React.createElement("button",{onClick:()=>say(st.nm),style:{display:"flex",alignItems:"center",gap:6,background:"none",padding:4}},React.createElement("span",{style:{fontSize:18}},st.em),React.createElement("span",{style:{fontSize:13,color:st.cl,fontWeight:600}},st.nm)),
React.createElement("div",{style:{fontSize:12,color:"rgba(255,255,255,.3)"}},(qi+1)+"/20")),
React.createElement("div",{style:{display:"flex",gap:4,marginBottom:8}},...STG.map((s,i)=>React.createElement("div",{key:s.id,style:{flex:1,height:6,borderRadius:3,overflow:"hidden",background:"rgba(255,255,255,.08)"}},
React.createElement("div",{style:{height:"100%",borderRadius:3,background:s.cl,width:(i<si?100:i===si?((sq+(qi%5===sq?0:0))/5*100):0)+"%",transition:"width .5s ease"}})))),
React.createElement("div",{style:{display:"flex",justifyContent:"center",gap:10,marginBottom:28}},...Array.from({length:5}).map((_,i)=>{const gi=si*5+i;
return React.createElement("div",{key:i,style:{width:"clamp(14px,3.5vw,18px)",height:"clamp(14px,3.5vw,18px)",borderRadius:9,background:gi<res.length?(res[gi]?"#00FF88":"#FF6B6B"):gi===qi?st.cl:"rgba(255,255,255,.12)",transition:"all .3s",boxShadow:gi===qi?`0 0 12px ${st.cl}55`:"none"}})})),
q.m==="sound"&&React.createElement(SoundG,{q,onA}),q.m==="rhyme"&&React.createElement(RhymeG,{q,onA}),q.m==="blend"&&React.createElement(BlendG,{q,onA}),q.m==="build"&&React.createElement(BuildG,{q,onA})))};

// â•â•â• QUEST COMPLETE â•â•â•
const QDone=({res,earned,ns,prize,streak,onHome})=>{const ok=res.filter(Boolean).length;const pct=Math.round(ok/20*100);const[cf,setCf]=useState(false);
useEffect(()=>{setCf(true);setTimeout(()=>setCf(false),5000);
const fam=pct===100?pick(["Mommy and Daddy are SO proud!","Bubby Feig can't believe it!","Kira is going to be amazed!"]):pct>=60?pick(["Daddy says wow!","Mommy is so happy!","Bubby is clapping!","Kira says amazing!"]):pick(["Mommy says keep going!","Daddy believes in you!","Bubby says practice makes perfect!"]);
setTimeout(()=>say((pct===100?"Perfect quest Sari! ":pct>=60?"Great quest today Sari! ":"Good try today Sari! ")+fam+" You earned "+earned+" stars!"+(streak>1?" That's "+streak+" days in a row!":"")),700)},[]);
const em=pct===100?"ðŸ‘‘":pct>=80?"ðŸ†":pct>=60?"â­":"ðŸ’ª";const mg=pct===100?"PERFECT QUEST!":pct>=80?"AMAZING QUEST!":pct>=60?"GREAT QUEST!":"GOOD TRY!";
return React.createElement("div",{style:{minHeight:"100vh",minHeight:"100dvh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:20,background:BG}},
React.createElement(Glow),React.createElement(Conf,{on:cf,mega:pct>=80}),
React.createElement("div",{style:{zIndex:2,textAlign:"center",maxWidth:420,width:"100%"}},
React.createElement("div",{style:{fontSize:"clamp(70px,20vw,100px)",marginBottom:10,animation:"bounceIn .5s ease-out"}},em),
React.createElement("h2",{style:{fontSize:"clamp(26px,7vw,34px)",fontWeight:700,marginBottom:4,animation:"slideUp .5s ease-out"}},mg),
React.createElement("div",{style:{fontSize:17,color:"rgba(255,255,255,.55)",marginBottom:8,animation:"slideUp .6s ease-out"}},ok," out of 20 correct"),
streak>0&&React.createElement("div",{style:{fontSize:16,color:"#FFD700",marginBottom:16,animation:"slideUp .65s ease-out"}},"ðŸ”¥ ",streak," day streak!"),
React.createElement("div",{style:{display:"flex",justifyContent:"center",gap:8,marginBottom:20,animation:"slideUp .7s ease-out"}},...STG.map((s,i)=>{const sr=res.slice(i*5,i*5+5);const so=sr.filter(Boolean).length;
return React.createElement("div",{key:s.id,style:{background:"rgba(255,255,255,.05)",borderRadius:16,padding:"10px 14px",textAlign:"center",border:`1px solid ${s.cl}33`}},
React.createElement("div",{style:{fontSize:24,marginBottom:2}},s.em),React.createElement("div",{style:{fontSize:13,fontWeight:600,color:s.cl}},so+"/5"))})),
React.createElement("div",{style:{background:"linear-gradient(145deg,rgba(255,215,0,.12),rgba(255,215,0,.04))",border:"1.5px solid rgba(255,215,0,.25)",borderRadius:20,padding:"14px 28px",display:"inline-flex",alignItems:"center",gap:10,marginBottom:20,animation:"bounceIn .8s ease-out"}},
React.createElement("span",{style:{fontSize:36,animation:"starPulse 1.5s ease-in-out infinite"}},"â­"),React.createElement("span",{style:{fontSize:28,fontWeight:700,color:"#FFD700"}},"+",earned),React.createElement("span",{style:{fontSize:14,color:"rgba(255,215,0,.5)"}},"stars!")),
ns&&React.createElement("div",{style:{background:"linear-gradient(145deg,rgba(180,75,255,.15),rgba(255,59,139,.08))",border:"1.5px solid rgba(180,75,255,.3)",borderRadius:20,padding:"12px 24px",marginBottom:16,animation:"bounceIn .85s ease-out",display:"inline-flex",alignItems:"center",gap:10}},React.createElement("span",{style:{fontSize:40}},ns),React.createElement("span",{style:{fontSize:15,fontWeight:600,color:"rgba(255,255,255,.7)"}},"New sticker!")),
prize&&React.createElement("div",{style:{background:"linear-gradient(145deg,rgba(255,59,139,.18),rgba(180,75,255,.08))",border:"2px solid #FF3B8B",borderRadius:22,padding:"20px 24px",marginBottom:20,animation:"bounceIn .9s ease-out"}},
React.createElement("div",{style:{fontSize:13,color:"#FF3B8B",fontWeight:600,marginBottom:8,letterSpacing:1}},"ðŸŽ‰ NEW PRIZE! ðŸŽ‰"),React.createElement("div",{style:{fontSize:48,marginBottom:6}},prize.e),React.createElement("div",{style:{fontSize:19,fontWeight:700}},prize.n),
prize.t==="real"&&React.createElement("div",{style:{fontSize:12,color:"rgba(255,255,255,.4)",marginTop:4}},"Show Abba to redeem! ðŸŽŸï¸")),
React.createElement("button",{onClick:()=>{say("See you tomorrow Sari! Mommy and Daddy love you!");setTimeout(onHome,1200)},style:{background:"linear-gradient(135deg,#FF3B8B,#FF6B8B)",borderRadius:22,padding:"18px 44px",fontSize:"clamp(18px,5vw,22px)",fontWeight:700,boxShadow:"0 6px 25px rgba(255,59,139,.3)"}},"ðŸ  Done!"),
React.createElement("div",{style:{marginTop:16,color:"rgba(255,255,255,.3)",fontSize:13}},"Come back tomorrow for a new quest! ðŸŒŸ")))};

// â•â•â• PRIZES â•â•â•
const PrizePg=({prog,onBack})=>{useEffect(()=>{const ul=PRIZES.filter(p=>p.s<=prog.stars);setTimeout(()=>{ul.length?say("Wow Sari! You have "+ul.length+(ul.length===1?" prize!":" prizes!")+" Show Abba to redeem the real ones!"):say("Play your daily quest to earn stars and unlock prizes!")},500)},[]);
return React.createElement("div",{style:{minHeight:"100vh",minHeight:"100dvh",display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 16px 40px",background:BG}},
React.createElement(Glow),React.createElement("div",{style:{zIndex:2,width:"100%",maxWidth:440}},
React.createElement("div",{style:{display:"flex",alignItems:"center",gap:14,marginBottom:20}},
React.createElement("button",{onClick:()=>{say("Going back!");setTimeout(onBack,400)},style:{background:"rgba(255,255,255,.07)",borderRadius:12,padding:"8px 16px",fontSize:15,color:"rgba(255,255,255,.5)"}},"â† Back"),
React.createElement("h2",{style:{fontSize:22,fontWeight:700}},"ðŸŽ Sari's Prizes")),
prog.stk&&prog.stk.length>0&&React.createElement("div",{style:{background:"rgba(255,255,255,.04)",border:"1px solid rgba(255,255,255,.06)",borderRadius:18,padding:"14px 16px",marginBottom:18}},
React.createElement("div",{style:{fontSize:13,color:"rgba(255,255,255,.4)",marginBottom:8}},"ðŸ† Sticker Collection ("+prog.stk.length+")"),
React.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:6}},...prog.stk.map((s,i)=>React.createElement("span",{key:i,style:{fontSize:24}},s)))),
React.createElement("div",{style:{display:"flex",flexDirection:"column",gap:12}},...PRIZES.map((p,i)=>{const ok=prog.stars>=p.s;
return React.createElement("button",{key:p.id,onClick:()=>say(ok?(p.n+" Unlocked!"+(p.t==="real"?" Show Abba!":"")):(p.n+" You need "+p.s+" stars. You have "+prog.stars)),
style:{background:ok?"linear-gradient(145deg,rgba(255,215,0,.1),rgba(255,59,139,.06))":"rgba(255,255,255,.025)",border:ok?"1.5px solid rgba(255,215,0,.25)":"1px solid rgba(255,255,255,.06)",borderRadius:20,padding:"14px 18px",display:"flex",alignItems:"center",gap:12,opacity:ok?1:.4,animation:`slideUp .4s ease-out ${i*.06}s both`,width:"100%",textAlign:"left"}},
React.createElement("div",{style:{fontSize:"clamp(30px,8vw,42px)"}},ok?p.e:"ðŸ”’"),React.createElement("div",{style:{flex:1}},React.createElement("div",{style:{fontSize:15,fontWeight:600}},p.n),React.createElement("div",{style:{fontSize:11,color:"rgba(255,255,255,.35)"}},ok?"âœ… "+(p.t==="real"?"Show Abba!":"Collected!"):p.s+" stars needed")),
ok&&React.createElement("div",{style:{fontSize:20}},p.t==="real"?"ðŸŽŸï¸":"âœ¨"))}))))};

// â•â•â• SPLASH â•â•â•
const Splash=({onStart})=>{const[sh,setSh]=useState(false);useEffect(()=>{setTimeout(()=>setSh(true),100)},[]);
useEffect(()=>{setTimeout(()=>say("Sari's Sound Quest! Mommy and Daddy made this just for you! Tap Let's Go to start!"),900)},[]);
return React.createElement("div",{style:{minHeight:"100vh",minHeight:"100dvh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:20,background:"linear-gradient(135deg,#0D0A1A 0%,#1A0A2E 50%,#0D1A2E 100%)"}},
React.createElement(Glow),...Array.from({length:12}).map((_,i)=>React.createElement("div",{key:i,style:{position:"fixed",fontSize:8+Math.random()*16,zIndex:1,left:5+Math.random()*90+"%",top:5+Math.random()*90+"%",animation:`sparkle ${1.5+Math.random()*2.5}s ease-in-out infinite`,animationDelay:Math.random()*3+"s",opacity:.4}},["âœ¨","â­","ðŸ’«","ðŸŒŸ"][i%4])),
React.createElement("div",{style:{zIndex:2,textAlign:"center",opacity:sh?1:0,transform:sh?"translateY(0)":"translateY(30px)",transition:"all .9s cubic-bezier(.34,1.56,.64,1)"}},
React.createElement("div",{style:{fontSize:68,marginBottom:10,animation:"float 3s ease-in-out infinite"}},"ðŸŒŸ"),
React.createElement("h1",{style:{fontSize:"clamp(36px,10vw,50px)",fontWeight:700,background:"linear-gradient(135deg,#FF3B8B,#FFD700,#B44BFF,#00C2FF)",backgroundSize:"300% 300%",animation:"rainbowBg 4s ease infinite",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",lineHeight:1.1,marginBottom:6}},"SARI'S"),
React.createElement("h1",{style:{fontSize:"clamp(28px,8vw,42px)",fontWeight:700,letterSpacing:3,marginBottom:18,textShadow:"0 0 35px rgba(255,59,139,.5)"}},"SOUND QUEST"),
React.createElement("p",{style:{color:"rgba(255,255,255,.5)",fontSize:15,marginBottom:36}},"Your daily reading adventure! ðŸ¯âœ¨"),
React.createElement("button",{onClick:()=>{initS();say("Let's go Sari! Mommy and Daddy love you!");setTimeout(onStart,1500)},style:{background:"linear-gradient(135deg,#FF3B8B,#FF6B8B)",borderRadius:28,padding:"22px 56px",fontSize:"clamp(24px,6vw,30px)",fontWeight:700,animation:"glow 2s ease-in-out infinite",boxShadow:"0 8px 35px rgba(255,59,139,.4)"}},"LET'S GO! ðŸš€")))};

// â•â•â• HOME â•â•â•
const Home=({prog,onQ,onP,onSettings})=>{const dn=prog.last===td();const nx=PRIZES.find(p=>p.s>prog.stars)||PRIZES[PRIZES.length-1];const ps=([...PRIZES].reverse().find(p=>p.s<=prog.stars)||{s:0}).s;const rng=nx.s-ps;const pct=rng>0?Math.min(100,((prog.stars-ps)/rng)*100):100;
useEffect(()=>{const g=["Welcome back Sari! Mommy and Daddy love you!","Hi Sari! Bubby Feig says go learn!","Sari's back! Kira is cheering for you!","Welcome Sari! Daddy says let's go!"];
let m=pick(g)+" You have "+prog.stars+" stars! ";m+=dn?"You already did today's quest! Come back tomorrow, or do a practice quest!":"Tap Start Today's Quest to begin!";
setTimeout(()=>say(m),500)},[]);
return React.createElement("div",{style:{minHeight:"100vh",minHeight:"100dvh",display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 16px 40px",background:BG}},
React.createElement(Glow),React.createElement("div",{style:{zIndex:2,width:"100%",maxWidth:440}},
React.createElement("div",{style:{textAlign:"center",marginBottom:14,animation:"slideUp .5s ease-out"}},
React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},
  React.createElement("div",{style:{width:40}}),
  React.createElement("div",null,React.createElement("div",{style:{fontSize:17,color:"rgba(255,255,255,.4)",marginBottom:3}},"Welcome back"),React.createElement("div",{style:{fontSize:"clamp(28px,8vw,36px)",fontWeight:700}},"Sari! ðŸŒŸ")),
  React.createElement("button",{onClick:onSettings,style:{background:"rgba(255,255,255,.06)",borderRadius:12,width:40,height:40,fontSize:18,display:"flex",alignItems:"center",justifyContent:"center"}},"âš™ï¸")
)),
React.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:10,marginBottom:18,flexWrap:"wrap",animation:"slideUp .6s ease-out"}},
React.createElement("button",{onClick:()=>say("You have "+prog.stars+" stars!"),style:{background:CD,borderRadius:20,padding:"10px 22px",display:"flex",alignItems:"center",gap:8,border:"1px solid rgba(255,215,0,.18)"}},React.createElement("span",{style:{fontSize:28}},"â­"),React.createElement("span",{style:{fontSize:28,fontWeight:700,color:"#FFD700"}},prog.stars)),
prog.streak>0&&React.createElement("button",{onClick:()=>say(prog.streak+" day streak!"),style:{background:CD,borderRadius:20,padding:"10px 18px",display:"flex",alignItems:"center",gap:6,border:"1px solid rgba(255,149,0,.2)"}},React.createElement("span",{style:{fontSize:22}},"ðŸ”¥"),React.createElement("span",{style:{fontSize:20,fontWeight:700,color:"#FF9500"}},prog.streak)),
React.createElement("button",{onClick:()=>{say("Prizes!");setTimeout(onP,400)},style:{background:CD,border:"1px solid rgba(255,59,139,.25)",borderRadius:20,padding:"10px 18px",fontSize:28}},"ðŸŽ")),
React.createElement("button",{onClick:()=>say(Math.round(pct)+" percent to your next prize, "+nx.n),style:{background:"rgba(255,255,255,.04)",borderRadius:18,padding:"14px 18px",marginBottom:24,border:"1px solid rgba(255,255,255,.06)",width:"100%",textAlign:"left",animation:"slideUp .7s ease-out"}},
React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8}},React.createElement("span",{style:{color:"rgba(255,255,255,.5)",fontSize:12}},"Next prize"),React.createElement("span",{style:{fontSize:13,color:"rgba(255,255,255,.6)"}},nx.e," ",nx.s," stars")),
React.createElement("div",{style:{background:"rgba(255,255,255,.08)",borderRadius:10,height:14,overflow:"hidden"}},React.createElement("div",{style:{height:"100%",borderRadius:10,background:"linear-gradient(90deg,#FF3B8B,#FFD700)",width:pct+"%",transition:"width .6s ease",boxShadow:"0 0 12px rgba(255,59,139,.4)"}}))),
React.createElement("div",{style:{animation:"slideUp .8s ease-out"}},
dn?React.createElement("div",{style:{background:"rgba(255,255,255,.04)",borderRadius:28,padding:"28px 24px",textAlign:"center",border:"1px solid rgba(255,255,255,.08)"}},
React.createElement("div",{style:{fontSize:52,marginBottom:8}},"âœ…"),React.createElement("div",{style:{fontSize:20,fontWeight:700,marginBottom:4}},"Today's Quest Complete!"),React.createElement("div",{style:{fontSize:14,color:"rgba(255,255,255,.4)"}},"Come back tomorrow for a new quest!"),
React.createElement("button",{onClick:()=>{say("Starting a practice quest!");setTimeout(onQ,600)},style:{background:"rgba(255,255,255,.08)",border:"1px solid rgba(255,255,255,.12)",borderRadius:18,padding:"14px 28px",fontSize:16,marginTop:16,color:"rgba(255,255,255,.6)"}},"ðŸ”„ Practice Quest"))
:React.createElement("button",{onClick:()=>{say("Let's start today's quest!");setTimeout(onQ,600)},style:{background:"linear-gradient(135deg,#FF3B8B,#B44BFF)",borderRadius:28,padding:"28px 24px",width:"100%",textAlign:"center",boxShadow:"0 8px 35px rgba(255,59,139,.3)",animation:"glow 2.5s ease-in-out infinite"}},
React.createElement("div",{style:{fontSize:48,marginBottom:6}},"ðŸš€"),React.createElement("div",{style:{fontSize:"clamp(22px,6vw,28px)",fontWeight:700,marginBottom:4}},"Start Today's Quest!"),
React.createElement("div",{style:{display:"flex",justifyContent:"center",gap:10,opacity:.7}},...STG.map(s=>React.createElement("span",{key:s.id,style:{fontSize:22}},s.em))),
React.createElement("div",{style:{fontSize:13,color:"rgba(255,255,255,.5)",marginTop:6}},"4 games Â· 20 questions Â· earn stars!"))),
// Voice status
React.createElement("div",{style:{textAlign:"center",marginTop:16,color:"rgba(255,255,255,.2)",fontSize:11}},
  xiKey?"ðŸŽ™ï¸ Human voice active":"ðŸ“± Using device voice Â· tap âš™ï¸ to upgrade"),
prog.days>0&&React.createElement("div",{style:{textAlign:"center",marginTop:8,color:"rgba(255,255,255,.2)",fontSize:12}},prog.days," days played Â· ",prog.ok," words correct ðŸ“š")))};

// â•â•â• APP â•â•â•
const App=()=>{const[scr,setScr]=useState("splash");const[prog,setProg]=useState(ld());const[qr,setQr]=useState([]);const[earn,setEarn]=useState(0);const[prz,setPrz]=useState(null);const[ns,setNs]=useState(null);
const finish=r=>{const ok=r.filter(Boolean).length;const e=ok*3;const nt=prog.stars+e;const np=PRIZES.find(p=>p.s<=nt&&p.s>prog.stars);
const nd=prog.last!==td();const str=nd?(prog.last===yd()?(prog.streak||0)+1:1):prog.streak;
let nstk=null;const stk=[...(prog.stk||[])];if(ok>=8){nstk=pick(STIX);stk.push(nstk)}
const np2={stars:nt,ok:prog.ok+ok,played:prog.played+20,streak:str,stk,last:td(),days:(prog.days||0)+(nd?1:0)};
setProg(np2);sv(np2);setQr(r);setEarn(e);setPrz(np||null);setNs(nstk);setScr("done");
if(np)setTimeout(()=>say("Wow! You unlocked a new prize! "+np.n+(np.t==="real"?" Show Mommy and Daddy!":"")),900)};
if(scr==="splash")return React.createElement(Splash,{onStart:()=>setScr("home")});
if(scr==="home")return React.createElement(Home,{prog,onQ:()=>setScr("quest"),onP:()=>setScr("prizes"),onSettings:()=>setScr("settings")});
if(scr==="settings")return React.createElement(Settings,{onBack:()=>setScr("home"),onSave:()=>setScr("home")});
if(scr==="quest")return React.createElement(Quest,{onDone:finish,onBack:()=>setScr("home")});
if(scr==="done")return React.createElement(QDone,{res:qr,earned:earn,ns,prize:prz,streak:prog.streak,onHome:()=>setScr("home")});
if(scr==="prizes")return React.createElement(PrizePg,{prog,onBack:()=>setScr("home")});
return null};
ReactDOM.createRoot(document.getElementById("root")).render(React.createElement(App));
</script>
</body>
</html>
